module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=0)}([function(t,e,i){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e);var a=function(t){return((t=new Date(t)).getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},s=function(){function t(e){var i=e.canvas,n=void 0!==i&&i,l=e.data,a=void 0===l?[]:l,s=e.limit,c=void 0===s?20:s,f=e.maxLimit,h=void 0!==f&&f,d=e.minLimit,u=void 0!==d&&d,g=e.offset,v=void 0===g?0:g;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={canvas:{element:n,context:n.getContext("2d"),isCanvas:(n instanceof Element||n instanceof HTMLDocument)&&"canvas"===n.tagName.toLowerCase()},indicator:{styles:{color:"#27ca5d",width:2},animation:{time:1e3,scaleTo:5}},line:{styles:{color:"#ffffff",width:1,gradient:{from:"#ffffff",to:"#000000",enable:!1}}},view:{styles:{background:"#000000"}},offset:{left:30,right:50,top:20,bottom:40},data:{offset:v,limit:{value:c,max:h,min:u},array:a},target:{enable:!0,coords:{x:0,y:0},styles:{lineColor:"rgb(60,60,60)",lineWidth:1,dotColor:"#fff",dotWidth:4,panelBackground:"rgb(60, 60, 60)",panelColor:"#fff"}},grid:{enable:!0,steps:{x:10,y:5},styles:{color:"rgb(20, 20, 20)",width:1}},timeLine:{enable:!0,resize:!0,count:5},valuesLine:{enable:!0,resize:!0,count:10,digits:2},timeStamp:+new Date},this.state.initialOffset=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.state.offset),this.checkErrors(),this.init()}var e,i,s;return e=t,(i=[{key:"checkErrors",value:function(){var t=this.state.canvas;if(!t.isCanvas)throw new Error(t.element+" is not a canvas element")}},{key:"newDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,i=void 0!==e&&e,n=t.time,o=void 0!==n&&n,r=this.getDots("all"),l=r.dots,a=this.state.data,s=l[l.length-1],c=s?s.value:0,f=Math.random()*(Math.random()>.5?-1:1),h=+new Date;o=o||h,i=parseFloat(i)||0===i?i:c+f,a.offset&&a.offset++,l.push({value:i,time:o})}},{key:"clearCanvas",value:function(){var t=this.state.canvas,e=t.element.width;t.context.clearRect(0,0,t.width,t.height),t.element.width=1,t.element.width=e}},{key:"init",value:function(){this.listeners(),this.render()}},{key:"render",value:function(){this.clearCanvas(),this.drawBackground(),this.drawGrid(),this.drawLine(),this.drawTime(),this.drawValues(),this.drawTarget(),this.drawIndicator(),requestAnimationFrame(this.render.bind(this))}},{key:"getDots",value:function(t){var e=this.state.data,i=e.array,o=e.limit,r=e.offset,l=n(i);if(o=o.value,r){var a=l.length-r,s=a>o;s||(e.offset=l.length-o),l=l.slice(0,s?a:o)}l.length>o&&(l=l.slice(l.length-o,l.length));for(var c=l.length?l[0].value:0,f=l.length?l[0].value:0,h=i.length?i[0].value:0,d=i.length?i[0].value:0,u=0;u<=i.length-1;u++){var g=i[u].value;g>h&&(h=g),g<d&&(d=g)}for(var v=0;v<=l.length-1;v++){var m=l[v].value;m>c&&(c=m),m<f&&(f=m)}var y={all:{dots:i,max:h,min:d},draw:{dots:l,max:c,min:f},last:i[i.length-1],first:i[0]};return t&&y[t]?y[t]:y}},{key:"getIndicatorCoords",value:function(){var t,e=this.state,i=e.canvas,n=e.indicator,o=e.offset,r=i.element,l=(n.styles,n.animation,this.getDots()),a=l.draw,s=l.last,c=this.getLineDrawCoords(),f=(c.lineStart,c.lineEnd,c.lineTop),h=c.lineBottom,d=c.lineHeight;return s&&((t=f+d-d*(100*(s.value-a.min)/(a.max-a.min)/100))||(t=d/2+f),t>h&&(t=h),t<f&&(t=f)),{x:r.clientWidth-(o.right||0),y:t}}},{key:"drawIndicator",value:function(){var t=this.getIndicatorCoords(),e=t.x,i=t.y,n=this.state,o=n.indicator,r=n.canvas,l=o.styles,a=o.animation,s=r.context;s.strokeStyle="transparent",s.save(),(!this.indicatorAnimatedState||this.indicatorAnimatedState>=1)&&(this.indicatorAnimatedState=0),s.globalAlpha=1-this.indicatorAnimatedState,s.beginPath(),s.arc(e,i,l.width*this.indicatorAnimatedState*a.scaleTo,0,2*Math.PI),s.fillStyle=l.color,s.fill(),s.stroke(),this.indicatorAnimatedState+=1/60/(a.time/1e3),s.restore(),s.beginPath(),s.arc(e,i,l.width,0,2*Math.PI),s.fillStyle=l.color,s.fill(),s.stroke()}},{key:"drawBackground",value:function(){var t=this.state,e=t.canvas,i=t.view,n=e.context,o=e.element,r=i.styles.background;o.width=o.clientWidth,o.height=o.clientHeight,n.fillStyle=r,n.fillRect(0,0,o.width,o.height)}},{key:"getLineDrawCoords",value:function(){var t=this.state,e=t.canvas,i=t.offset,n=e.element,o=n.clientWidth-i.right,r=i.left,l=o-r,a=i.top,s=n.clientHeight-i.bottom;return{lineStart:o,lineEnd:r,lineView:l,lineTop:a,lineBottom:s,lineHeight:s-a}}},{key:"drawTime",value:function(){var t=this.getDots("draw"),e=this.getLineDrawCoords(),i=(e.lineStart,e.lineEnd,e.lineView,e.lineTop,e.lineBottom,e.lineHeight,this.state),o=i.canvas,r=i.timeLine,l=i.timeStamp,s=i.initialOffset,c=r.enable,f=r.count,h=o.element,d=o.context,u=n(t.dots),g=[];if(c){for(var v=Math.ceil(u.length/f),m=0,y=u.length-1;y>=0;y--)u.length<=f?g.push(u[y]):(m===v&&(m=0),m||g.push(u[y]),m++,0===y&&m/v>=1&&g.push(u[y]));for(var p=0;p<=g.length-1;p++){var b=g[p];d.font="100 12px sans-serif",d.fillStyle="#fff",d.textAlign="center",d.textBaseline="middle",d.fillText(a(b&&b.time?b.time:l),b?b.x:0,h.clientHeight-s.bottom/2+2)}}}},{key:"drawValues",value:function(){var t=this.getDots("draw"),e=t.max,i=t.min,n=this.getLineDrawCoords(),o=(n.lineStart,n.lineEnd,n.lineView,n.lineTop),r=n.lineBottom,l=n.lineHeight,a=this.state,s=a.canvas,c=a.valuesLine,f=a.offset,h=c.count,d=c.enable,u=c.digits,g=s.element,v=s.context,m=[];if(d){var y=l/(h-1),p=o+y,b=(g.clientHeight+f.top-f.bottom)/2;if(i===e){m.push({text:e,y:b});for(var x=(b-f.top)/y,w=(b-f.top)/y,k=1;k<=x;k++)m.push({text:e+e*k,y:b-y*k});for(var S=1;S<=w;S++)m.push({text:e-e*S,y:b+y*S})}else{m.push({text:e,y:o});for(var T=(e-i)/(h-1),O=1;O<=h-2;O++)m.push({text:e-T*O,y:p}),p+=y;m.push({text:i,y:r})}for(var P=0;P<=m.length-1;P++){var C=m[P];v.font="100 12px sans-serif",v.fillStyle="#fff",v.textAlign="center",v.textBaseline="middle",v.fillText(C.text.toFixed(u),g.clientWidth-f.right/2,C.y+2)}}}},{key:"drawLine",value:function(){for(var t=this.state,e=t.canvas,i=t.line,n=t.view,o=i.styles,r=o.gradient,l=o.color,a=o.width,s=n.styles.background,c=e.context,f=e.element,h=this.getLineDrawCoords(),d=h.lineStart,u=h.lineEnd,g=h.lineView,v=h.lineTop,m=h.lineBottom,y=h.lineHeight,p=this.getDots("draw"),b=p.dots,x=p.min,w=p.max,k=d,S=b.length-1,T=S;T>=0;T--){var O=b[T],P=O.value,C=g/S;O.x=k,O.y=v+y-y*(100*(P-x)/(w-x)/100),O.y||(O.y=y/2+v),k-=C}if(c.beginPath(),c.lineWidth=a,c.strokeStyle=l,c.lineJoin="round",r.enable){var L=c.createLinearGradient(0,v,0,y);L.addColorStop(0,r.from),L.addColorStop(1,r.to),c.fillStyle=L,c.lineTo(d,y)}for(var j=S;j>=0;j--){var D=b[j];c.lineTo(D.x,D.y)}r.enable&&(c.lineTo(u,m),c.fill()),c.stroke(),r.enable&&(c.beginPath(),c.lineWidth=a+1,c.strokeStyle=s,c.lineTo(u,0),c.lineTo(u,f.clientHeight),c.lineTo(d,f.clientHeight),c.lineTo(d,0),c.stroke())}},{key:"drawTarget",value:function(){var t=this.state,e=t.canvas,i=t.target,o=t.initialOffset,r=t.valuesLine,l=i.styles,s=i.coords,c=s.x,f=s.y,h=e.element,d=e.context,u=n(this.getDots("draw").dots),g=!1;if(i.enable&&c&&f){for(var v=0;v<=u.length-1;v++){var m=u[v],y=u[v+1];y&&c>=m.x&&c<=y.x&&(g=(y.x+m.x)/2<=c?y:m)}if(g){d.lineWidth=l.lineWidth,d.strokeStyle=l.lineColor,d.beginPath(),d.moveTo(0+o.left,g.y),d.lineTo(h.clientWidth-o.right,g.y),d.stroke(),d.beginPath(),d.moveTo(g.x,0+o.top),d.lineTo(g.x,h.clientHeight-o.bottom),d.stroke(),d.beginPath(),d.strokeStyle=d.fillStyle=l.dotColor,d.arc(g.x,g.y,l.dotWidth,0,2*Math.PI),d.fill(),d.stroke();var p={bottom:{background:l.panelBackground,color:l.panelColor,width:80,height:o.bottom,x:g.x-40,y:h.clientHeight-o.bottom,text:a(g.time)},right:{background:l.panelBackground,color:l.panelColor,width:o.right,height:20,x:h.clientWidth-o.right,y:g.y-10,text:g.value.toFixed(r.digits||2)}};Object.values(p).forEach((function(t){d.strokeStyle=d.fillStyle=t.background,d.beginPath(),d.rect(t.x,t.y,t.width,t.height),d.fill(),d.stroke(),d.font="100 12px sans-serif",d.fillStyle=t.color,d.textAlign=t.textAlign,d.textBaseline="center",d.fillText(t.text,t.x+t.width/2,t.y+t.height/2+2)}))}}}},{key:"drawGrid",value:function(){var t=this.state,e=t.canvas,i=t.grid,n=t.initialOffset,o=e.element,r=e.context,l=i.enable,a=i.steps,s=i.styles,c=i.type;if(l){r.lineWidth=s.width,r.strokeStyle=s.color,r.beginPath(),r.lineTo(0+n.left,0+n.top),r.lineTo(o.clientWidth-n.right,0+n.top),r.lineTo(o.clientWidth-n.right,o.clientHeight-n.bottom),r.lineTo(0+n.left,o.clientHeight-n.bottom),r.lineTo(0+n.left,0+n.top),r.stroke();var f=[],h=[],d="px"===c,u=(o.clientWidth-n.right-n.left)/a.x,g=0+n.left,v=(o.clientHeight-n.top-n.bottom)/a.y,m=0+n.top;if(d){for(var y=1;y<u;y++){var p=g+y*a.x;f.push(p)}for(var b=1;b<v;b++){var x=m+b*a.y;h.push(x)}}else{for(var w=1;w<a.x;w++){var k=g+w*u;f.push(k)}for(var S=1;S<a.y;S++){var T=m+S*v;h.push(T)}}for(var O=0;O<=f.length-1;O++)r.beginPath(),r.lineTo(f[O],0+n.top),r.lineTo(f[O],o.clientHeight-n.bottom),r.stroke();for(var P=0;P<=h.length-1;P++)r.beginPath(),r.lineTo(0+n.left,h[P]),r.lineTo(o.clientWidth-n.right,h[P]),r.stroke()}}},{key:"listeners",value:function(){var t=this,e=this.state,i=e.canvas,n=e.offset,o=(e.limit,e.target),r=e.initialOffset,l=i.element,a=!1,s=0,c=0,f=function(){o.coords={x:!1,y:!1}},h=function(t){a=!1,s=0,c=0};l.addEventListener("mouseup",(function(){h()})),l.addEventListener("mouseleave",(function(){h(),f()})),l.addEventListener("mousedown",(function(t){a={x:t.clientX,y:t.clientY},s=t.clientX,c=t.clientY})),l.addEventListener("mousemove",(function(e){var i=t.state,h=i.data,d=i.valuesLine,u=i.timeLine,g=t.getDots("all").dots,v=l.getBoundingClientRect();if(f(),l.style.cursor="default",e.clientX>=v.left+r.left+1&&e.clientX<=v.left+v.width-r.right&&e.clientY>=v.top+r.top&&e.clientY<=v.bottom-r.bottom&&(o.enable&&(l.style.cursor="crosshair"),o.coords={x:e.clientX-v.left,y:e.clientY-v.top}),e.clientX>=v.left+n.left&&e.clientX<=v.left+v.width-n.right&&e.clientY>=v.top+r.top&&e.clientY<=v.bottom-r.bottom&&a){var m=h.offset+e.clientX-s;h.offset=m<0?0:m}if(d.enable&&d.resize&&e.clientX>=v.left+v.width-n.right&&(l.style.cursor="row-resize",a)){var y=c-e.clientY,p=e.clientY-c,b=e.clientY>c,x=e.clientY<c;if(b){var w=(v.height+r.top-r.bottom)/2-60,k=(v.height+r.bottom-r.top)/2-60;n.top=n.top-y<w?n.top-y:w,n.bottom=n.bottom+p<k?n.bottom+p:k}x&&(n.top=n.top-y>r.top?n.top-y:r.top,n.bottom=n.bottom+p>r.bottom?n.bottom+p:r.bottom)}if(u.enable&&u.resize&&e.clientX>=v.left+n.left&&e.clientX<=v.left+v.width-n.right&&e.clientY>=v.bottom-r.bottom&&(l.style.cursor="col-resize",a)){var S=h.limit.value+e.clientX-s;h.limit.value=h.limit.min&&S<h.limit.min?h.limit.min:h.limit.max&&S>h.limit.max?h.limit.max:g.length<S?g.length:S<=2?2:S}a&&(s=e.clientX,c=e.clientY)}))}}])&&l(e.prototype,i),s&&l(e,s),t}();e.default=s}]);