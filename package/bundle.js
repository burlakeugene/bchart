module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=0)}([function(t,e,i){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e);var s=function(t){return((t=new Date(t)).getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},f=function t(e,i){for(var n in i)try{i[n].constructor==Object?e[n]=t(e[n],i[n]):e[n]=i[n]}catch(t){e[n]=i[n]}return e},c=function(){function t(e){var i=e.canvas,n=void 0!==i&&i,o=e.data,r=void 0===o?[]:o,a=e.settings,s=void 0===a?{}:a,f=e.offset,c=void 0===f?{left:30,right:50,top:20,bottom:40}:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas={element:n,context:n.getContext("2d"),isCanvas:(n instanceof Element||n instanceof HTMLDocument)&&"canvas"===n.tagName.toLowerCase()},this.data=r,this.settings={data:{offset:0,limit:{value:20}},indicator:{enable:!0,styles:{color:"#27ca5d",width:2},animation:{time:1e3,scaleTo:5}},offset:l({},c),line:{styles:{color:"#ffffff",width:5,lineGradient:{from:"#954ce9",to:"#24c1ed",enable:!0},backgroundGradient:{from:"rgba(149, 76, 233, 0.17)",to:"rgba(149, 76, 233, 0)",enable:!0}},offset:l({},c)},view:{styles:{background:"#1e2730"}},target:{enable:!0,coords:{x:0,y:0},styles:{lineColor:"#4a667a",lineWidth:1,dotColor:"#fff",dotWidth:4,panelBackground:"#4a667a",panelColor:"#fff"}},grid:{enable:!0,steps:{x:10,y:5},styles:{color:"#4a667a",width:1}},timeLine:{enable:!0,resize:!0,count:5},valuesLine:{enable:!0,resize:!0,count:10,digits:2},timeStamp:+new Date},this.setSettings(s),this.init()}var e,i,o;return e=t,(i=[{key:"setSettings",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.offset&&(t.line={},t.line.offset=t.offset),f(this.settings,t)}},{key:"getSettings",value:function(){return this.settings}},{key:"setData",value:function(t){this.data=t}},{key:"getData",value:function(){return this.data}},{key:"getLast",value:function(){return this.getDots("last")}},{key:"newDot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,i=void 0!==e&&e,n=t.time,o=void 0!==n&&n,l=this.getDots("all"),r=l.dots,a=this.settings,s=a.data,f=r[r.length-1],c=f?f.value:0,h=Math.random()*(Math.random()>.5?-1:1),d=+new Date;o=o||d,i=parseFloat(i)||0===i?i:c+h,s.offset&&s.offset++,r.push({value:i,time:o})}},{key:"init",value:function(){this.listeners(),this.render()}},{key:"render",value:function(){this.drawBackground(),this.drawGrid(),this.drawLine(),this.drawTime(),this.drawValues(),this.drawTarget(),this.drawIndicator(),requestAnimationFrame(this.render.bind(this))}},{key:"getDots",value:function(t){var e=this.settings.data,i=this.data,o=n(this.data);if(e.offset){var l=o.length-e.offset,r=l>e.limit.value;r||(e.offset=o.length-e.limit.value),o=o.slice(0,r?l:e.limit.value)}o.length>e.limit.value&&(o=o.slice(o.length-e.limit.value,o.length));for(var a=o.length?o[0].value:0,s=o.length?o[0].value:0,f=e.length?e[0].value:0,c=e.length?e[0].value:0,h=0;h<=i.length-1;h++){var d=i[h].value;d>f&&(f=d),d<c&&(c=d)}for(var u=0;u<=o.length-1;u++){var g=o[u].value;g>a&&(a=g),g<s&&(s=g)}var m={all:{dots:i,max:f,min:c},draw:{dots:o=this.calcDotsCoords(o,s,a),max:a,min:s},last:i[i.length-1],first:i[0]};return t&&m[t]?m[t]:m}},{key:"calcDotsCoords",value:function(t,e,i){for(var n=this.getLineDrawCoords(),o=n.lineStart,l=(n.lineEnd,n.lineView),r=n.lineTop,a=(n.lineBottom,n.lineHeight),s=o,f=t.length-1,c=f;c>=0;c--){var h=t[c],d=h.value,u=l/f;h.x=s,h.y=r+a-a*(100*(d-e)/(i-e)/100),h.y||(h.y=a/2+r),s-=u}return t}},{key:"getIndicatorCoords",value:function(){var t,e=this.canvas,i=this.settings,n=i.indicator,o=i.line.offset,l=e.element,r=(n.styles,n.animation,this.getDots()),a=r.draw,s=r.last,f=this.getLineDrawCoords(),c=(f.lineStart,f.lineEnd,f.lineTop),h=f.lineBottom,d=f.lineHeight,u=l.clientWidth-(o.right||0);return s&&((t=c+d-d*(100*(s.value-a.min)/(a.max-a.min)/100))||(t=d/2+c),t>h&&(t=h),t<c&&(t=c)),{x:u,y:t}}},{key:"drawIndicator",value:function(){var t=this.getIndicatorCoords(),e=t.x,i=t.y,n=this.settings,o=this.canvas,l=n.indicator,r=l.styles,a=l.animation,s=l.enable,f=o.context;s&&(f.strokeStyle="transparent",f.save(),(!this.indicatorAnimatedState||this.indicatorAnimatedState>=1)&&(this.indicatorAnimatedState=0),f.globalAlpha=1-this.indicatorAnimatedState,f.beginPath(),f.arc(e,i,r.width*this.indicatorAnimatedState*a.scaleTo,0,2*Math.PI),f.fillStyle=r.color,f.fill(),f.stroke(),this.indicatorAnimatedState+=1/60/(a.time/1e3),f.restore(),f.beginPath(),f.arc(e,i,r.width,0,2*Math.PI),f.fillStyle=r.color,f.fill(),f.stroke())}},{key:"drawBackground",value:function(){var t=this.canvas,e=this.settings.view,i=t.context,n=t.element,o=e.styles.background,l=window.devicePixelRatio||1;n.width=n.clientWidth*l,n.height=n.clientHeight*l,i.scale(l,l),i.fillStyle=o,i.fillRect(0,0,n.width,n.height)}},{key:"getLineDrawCoords",value:function(){var t=this.canvas,e=this.settings,i=e.line,n=(e.grid,i.offset),o=t.element,l=o.clientWidth-n.right,r=n.left,a=l-r,s=n.top+i.styles.width,f=o.clientHeight-n.bottom-i.styles.width;return{lineStart:l,lineEnd:r,lineView:a,lineTop:s,lineBottom:f,lineHeight:f-s}}},{key:"drawTime",value:function(){var t=this.getDots("draw"),e=this.getLineDrawCoords(),i=(e.lineStart,e.lineEnd,e.lineView,e.lineTop,e.lineBottom,e.lineHeight,this.canvas),o=this.settings,l=o.timeLine,r=o.timeStamp,a=o.offset,f=l.enable,c=l.count,h=i.element,d=i.context,u=n(t.dots),g=[];if(f){for(var m=Math.ceil(u.length/c),v=0,y=u.length-1;y>=0;y--)u.length<=c?g.push(u[y]):(v===m&&(v=0),v||g.push(u[y]),v++,0===y&&v/m>=1&&g.push(u[y]));for(var p=0;p<=g.length-1;p++){var b=g[p];d.font="100 12px sans-serif",d.fillStyle="#fff",d.textAlign="center",d.textBaseline="middle",d.fillText(s(b&&b.time?b.time:r),b?b.x:0,h.clientHeight-a.bottom/2+2)}}}},{key:"drawValues",value:function(){var t=this.getDots("draw"),e=t.max,i=t.min,n=this.getLineDrawCoords(),o=(n.lineStart,n.lineEnd,n.lineView,n.lineTop),l=n.lineBottom,r=n.lineHeight,a=this.canvas,s=this.settings,f=s.valuesLine,c=s.offset,h=f.count,d=f.enable,u=f.digits,g=a.element,m=a.context,v=[];if(d){var y=r/(h-1),p=o+y,b=(g.clientHeight+c.top-c.bottom)/2;if(i===e){v.push({text:e,y:b});for(var x=(b-c.top)/y,w=(b-c.top)/y,k=1;k<=x;k++)v.push({text:e+e*k,y:b-y*k});for(var S=1;S<=w;S++)v.push({text:e-e*S,y:b+y*S})}else{v.push({text:e,y:o});for(var T=(e-i)/(h-1),P=1;P<=h-2;P++)v.push({text:e-T*P,y:p}),p+=y;v.push({text:i,y:l})}for(var D=0;D<=v.length-1;D++){var L=v[D];m.font="100 12px sans-serif",m.fillStyle="#fff",m.textAlign="center",m.textBaseline="middle",m.fillText(L.text.toFixed(u),g.clientWidth-c.right/2,L.y+2)}}}},{key:"drawLine",value:function(){var t=this.canvas,e=this.settings,i=e.line,n=e.grid,o=e.offset,l=e.view,r=i.styles,a=r.backgroundGradient,s=r.lineGradient,f=r.color,c=r.width,h=t.context,d=t.element,u=this.getLineDrawCoords(),g=u.lineStart,m=u.lineEnd,v=u.lineTop,y=u.lineBottom,p=this.getDots("draw"),b=p.dots;if(p.min,p.max,h.beginPath(),h.lineWidth=c,h.strokeStyle=f,h.lineJoin="round",s.enable){var x=h.createLinearGradient(m,0,g,0);x.addColorStop(0,s.from),x.addColorStop(1,s.to),h.strokeStyle=x}for(var w=b.length-1;w>=0;w--){var k=b[w];h.lineTo(k.x,k.y)}if(h.stroke(),a.enable&&b.length>1){if(h.beginPath(),h.lineWidth=0,h.strokeStyle="transparent",s.enable){var S=h.createLinearGradient(0,v,0,y);S.addColorStop(0,a.from),S.addColorStop(1,a.to),h.fillStyle=S}h.lineTo(g,y);for(var T=b.length-1;T>=0;T--){var P=b[T];h.lineTo(P.x,P.y)}h.lineTo(m,y),h.fill(),h.stroke()}n.enable&&(h.beginPath(),h.lineJoin="miter",h.lineWidth=c,h.strokeStyle=l.styles.background,h.lineTo(0+o.left-c/2,0+o.top-c/2),h.lineTo(0+o.left-c/2,d.clientHeight-o.bottom+c/2),h.lineTo(d.clientWidth-o.right+c/2,d.clientHeight-o.bottom+c/2),h.lineTo(d.clientWidth-o.right+c/2,0+o.top-c/2),h.closePath(),h.stroke(),h.beginPath(),h.lineJoin="miter",h.lineWidth=n.styles.width,h.strokeStyle=n.styles.color,h.lineTo(0+o.left,0+o.top),h.lineTo(0+o.left,d.clientHeight-o.bottom),h.lineTo(d.clientWidth-o.right,d.clientHeight-o.bottom),h.lineTo(d.clientWidth-o.right,0+o.top),h.closePath(),h.stroke())}},{key:"drawTarget",value:function(){var t=this.canvas,e=this.settings,i=e.target,o=e.offset,l=e.valuesLine,r=e.timeStamp,a=i.styles,f=i.coords,c=f.x,h=f.y,d=t.element,u=t.context,g=n(this.getDots("draw").dots),m=!1;if(i.enable&&c&&h){for(var v=0;v<=g.length-1;v++){var y=g[v],p=g[v+1];p&&c>=y.x&&c<=p.x&&(m=(p.x+y.x)/2<=c?p:y)}if(m){u.lineWidth=a.lineWidth,u.strokeStyle=a.lineColor,u.beginPath(),u.moveTo(0+o.left,m.y),u.lineTo(d.clientWidth-o.right,m.y),u.stroke(),u.beginPath(),u.moveTo(m.x,0+o.top),u.lineTo(m.x,d.clientHeight-o.bottom),u.stroke(),u.beginPath(),u.strokeStyle=u.fillStyle=a.dotColor,u.arc(m.x,m.y,a.dotWidth,0,2*Math.PI),u.fill(),u.stroke();var b={bottom:{background:a.panelBackground,color:a.panelColor,width:80,height:o.bottom,x:m.x-40,y:d.clientHeight-o.bottom,text:s(m&&m.time?m.time:r)},right:{background:a.panelBackground,color:a.panelColor,width:o.right,height:20,x:d.clientWidth-o.right,y:m.y-10,text:m.value.toFixed(l.digits||2)}};Object.values(b).forEach((function(t){u.strokeStyle=u.fillStyle=t.background,u.beginPath(),u.rect(t.x,t.y,t.width,t.height),u.fill(),u.stroke(),u.font="100 12px sans-serif",u.fillStyle=t.color,u.textAlign=t.textAlign,u.textBaseline="center",u.fillText(t.text,t.x+t.width/2,t.y+t.height/2+2)}))}}}},{key:"drawGrid",value:function(){var t=this.canvas,e=this.settings,i=e.grid,n=e.offset,o=t.element,l=t.context,r=i.enable,a=i.steps,s=i.styles,f=i.type;if(r){l.lineWidth=s.width,l.strokeStyle=s.color,l.beginPath(),l.lineTo(0+n.left,0+n.top),l.lineTo(o.clientWidth-n.right,0+n.top),l.lineTo(o.clientWidth-n.right,o.clientHeight-n.bottom),l.lineTo(0+n.left,o.clientHeight-n.bottom),l.lineTo(0+n.left,0+n.top),l.closePath(),l.stroke();var c=[],h=[],d="px"===f,u=(o.clientWidth-n.right-n.left)/a.x,g=0+n.left,m=(o.clientHeight-n.top-n.bottom)/a.y,v=0+n.top;if(d){for(var y=1;y<u;y++){var p=g+y*a.x;c.push(p)}for(var b=1;b<m;b++){var x=v+b*a.y;h.push(x)}}else{for(var w=1;w<a.x;w++){var k=g+w*u;c.push(k)}for(var S=1;S<a.y;S++){var T=v+S*m;h.push(T)}}for(var P=0;P<=c.length-1;P++)l.beginPath(),l.lineTo(c[P],0+n.top),l.lineTo(c[P],o.clientHeight-n.bottom),l.stroke();for(var D=0;D<=h.length-1;D++)l.beginPath(),l.lineTo(0+n.left,h[D]),l.lineTo(o.clientWidth-n.right,h[D]),l.stroke()}}},{key:"listeners",value:function(){var t=this,e=this.canvas,i=this.settings.target,n=e.element,o=!1,l=0,r=0,a=function(){i.coords={x:!1,y:!1}},s=function(t){o=!1,l=0,r=0};"ontouchstart"in document.documentElement?(n.addEventListener("touchend",(function(){s(),a()})),n.addEventListener("touchstart",(function(t){var e=t.touches,a=n.getBoundingClientRect(),s=e[0];1===e.length&&(i.coords={x:s.clientX-a.left,y:s.clientY-a.top}),l=s.clientX,r=s.clientY,o={x:l,y:r}})),n.addEventListener("touchmove",(function(e){var s=t.settings,f=(s.valuesLine,s.timeLine,s.data),c=s.line,h=s.offset,d=t.getDots("all").dots,u=n.getBoundingClientRect(),g=e.touches,m=g[0];if(a(),1===g.length&&(m.clientX>=u.left+h.left+1&&m.clientX<=u.left+u.width-h.right&&m.clientY>=u.top+h.top&&m.clientY<=u.bottom-h.bottom&&(i.coords={x:m.clientX-u.left,y:m.clientY-u.top}),m.clientX>=u.left+c.offset.left&&m.clientX<=u.left+u.width-c.offset.right&&m.clientY>=u.top+h.top&&m.clientY<=u.bottom-h.bottom&&o)){var v=f.offset+m.clientX-l;v<0&&(v=0),v>d.length-f.limit.value&&(v=d.length-f.limit.value),f.offset=v}if(2===g.length){var y=g[0],p=g[1],b=y.clientX-p.clientX,x=f.limit.value+b;f.limit.value=f.limit.min&&x<f.limit.min?f.limit.min:f.limit.max&&x>f.limit.max?f.limit.max:d.length<x?d.length:x<=2?2:x}o&&(l=m.clientX,r=m.clientY)}))):(n.addEventListener("mouseup",(function(){s()})),n.addEventListener("mouseleave",(function(){s(),a()})),n.addEventListener("mousedown",(function(t){l=t.clientX,r=t.clientY,o={x:l,y:r}})),n.addEventListener("mousemove",(function(e){var s=t.settings,f=s.valuesLine,c=s.timeLine,h=s.data,d=s.line,u=s.offset,g=t.getDots("all").dots,m=n.getBoundingClientRect();if(a(),n.style.cursor="default",e.clientX>=m.left+u.left+1&&e.clientX<=m.left+m.width-u.right&&e.clientY>=m.top+u.top&&e.clientY<=m.bottom-u.bottom&&(i.enable&&(n.style.cursor="crosshair"),i.coords={x:e.clientX-m.left,y:e.clientY-m.top}),e.clientX>=m.left+d.offset.left&&e.clientX<=m.left+m.width-d.offset.right&&e.clientY>=m.top+u.top&&e.clientY<=m.bottom-u.bottom&&o){var v=h.offset+e.clientX-l;v<0&&(v=0),v>g.length-h.limit.value&&(v=g.length-h.limit.value),h.offset=v}if(f.enable&&f.resize&&e.clientX>=m.left+m.width-u.right&&(n.style.cursor="row-resize",o)){var y=r-e.clientY,p=e.clientY-r,b=e.clientY>r,x=e.clientY<r;if(b){var w=(m.height+u.top-u.bottom)/2-60,k=(m.height+u.bottom-u.top)/2-60;d.offset.top=d.offset.top-y<w?d.offset.top-y:w,d.offset.bottom=d.offset.bottom+p<k?d.offset.bottom+p:k}x&&(d.offset.top=d.offset.top-y>u.top?d.offset.top-y:u.top,d.offset.bottom=d.offset.bottom+p>u.bottom?d.offset.bottom+p:u.bottom)}if(c.enable&&c.resize&&e.clientX>=m.left+d.offset.left&&e.clientX<=m.left+m.width-d.offset.right&&e.clientY>=m.bottom-u.bottom&&(n.style.cursor="col-resize",o)){var S=h.limit.value+e.clientX-l;h.limit.value=h.limit.min&&S<h.limit.min?h.limit.min:h.limit.max&&S>h.limit.max?h.limit.max:g.length<S?g.length:S<=2?2:S}o&&(l=e.clientX,r=e.clientY)})))}}])&&a(e.prototype,i),o&&a(e,o),t}();e.default=c}]);