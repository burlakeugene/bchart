module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=1)}([function(t,e){Date.prototype.formatting=function(t){var e=this.getFullYear().toString();t=t.replace(/yyyy/g,e);var i=(this.getMonth()+1).toString();t=t.replace(/mm/g,i[1]?i:"0"+i[0]);var n=this.getDate().toString();t=t.replace(/dd/g,n[1]?n:"0"+n[0]);var o=this.getHours().toString();t=t.replace(/hh/g,o[1]?o:"0"+o[0]);var l=this.getMinutes().toString();t=t.replace(/ii/g,l[1]?l:"0"+l[0]);var r=this.getSeconds().toString();return t=t.replace(/ss/g,r[1]?r:"0"+r[0])},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,o){return i<2*o&&(o=i/2),n<2*o&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+i,e,t+i,e+n,o),this.arcTo(t+i,e+n,t,e+n,o),this.arcTo(t,e+n,t,e,o),this.arcTo(t,e,t+i,e,o),this.closePath(),this}},function(t,e,i){"use strict";i.r(e);i(0);var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hh:ii:ss";return(t=new Date(t)).formatting(e)},o=function t(e,i){for(var n in i)try{i[n].constructor==Object?e[n]=t(e[n],i[n]):e[n]=i[n]}catch(t){e[n]=i[n]}return e},l=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},r=function(t,e,i,n){return{x:t+Math.cos(n)*i,y:e+Math.sin(n)*i}},a=function(t,e){return"#"+t.replace(/^#/,"").replace(/../g,(function(t){return("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).substr(-2)}))};function s(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(i,!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e){var i=e.canvas,n=void 0!==i&&i,o=e.data,l=void 0===o?[]:o,r=e.settings,a=void 0===r?{}:r,s=e.offset,c=void 0===s?{left:30,right:50,top:20,bottom:40}:s,h=e.actions,u=void 0===h?{}:h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actions=u,this.canvas={element:n,context:n.getContext("2d"),isCanvas:(n instanceof Element||n instanceof HTMLDocument)&&"canvas"===n.tagName.toLowerCase()},this.data=l,this.settings={data:{offset:0,limit:{value:100,min:10}},offset:f({},c),line:{styles:{color:"#ffffff",width:2,lineGradient:{points:[{color:"#954ce9"},{color:"#24c1ed"}],enable:!0},backgroundGradient:{points:[{color:"rgba(149, 76, 233, 0.17)"},{color:"rgba(149, 76, 233, 0)"}],enable:!0}},offset:f({},c)},view:{styles:{background:"#1a1e30"}},targetValue:{enable:!0,coords:{x:0,y:0},target:{enable:!0,styles:{points:[{width:10,background:"transparent",strokeColor:"#6f7dab",strokeWidth:1},{width:4,background:"#24c1ed",strokeColor:"transparent"}]}},horizontalLine:{enable:!0,styles:{line:{color:"#6f7dab",width:1},panel:{background:"#6f7dab",color:"#fff"}}},verticalLine:{enable:!0,styles:{line:{color:"#6f7dab",width:1},panel:{background:"#6f7dab",color:"#fff"}}},valueLabel:{enable:!0,styles:{color:"#fff",background:"#954ce9",borderRadius:2}}},grid:{enable:!0,styles:{background:"",color:"#2b2a49",width:1},horizontal:{step:4,enable:!0},vertical:{step:10,enable:!0}},timeLine:{enable:!0,resize:!0,mousewheel:{enable:!0,speed:1},count:5,styles:{color:"#6f7dab"}},valuesLine:{enable:!0,position:"right",resize:{enable:!0,topMin:80,bottomMin:80},count:10,digits:2,styles:{color:"#6f7dab"},overflowValues:!1},currentValue:{enable:!0,position:"right",digits:2,styles:{panel:{color:"#ffffff",background:"#954ce9",height:20},line:{color:"#954ce9",width:1,gradient:{enable:!0,points:[{color:"#24c1ed"},{color:"#954ce9"}]},dash:[]}}},indicator:{enable:!0,styles:{color:"#27ca5d",width:3},animation:{time:1e3,scaleTo:5}},timeFormat:{line:"hh:ii:ss",current:"hh:ii:ss"},timeStamp:+new Date},this.setSettings(a),this.init()}var e,i,l;return e=t,(i=[{key:"setSettings",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.offset&&(t.line={},t.line.offset=t.offset),o(this.settings,t),this.setPointsLimit(!1,!1)}},{key:"getSettings",value:function(){return this.settings}},{key:"setData",value:function(t){this.data=t}},{key:"getData",value:function(){return this.data}},{key:"getLast",value:function(){return this.getPoints("last")}},{key:"newPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,i=void 0!==e&&e,n=t.time,o=void 0!==n&&n,l=this.getPoints("all"),r=l.points,a=this.settings,s=a.data,c=r[r.length-1],f=c?c.value:0,h=Math.random()*(Math.random()>.5?-1:1),u=+new Date;o=o||u,i=parseFloat(i)||0===i?i:f+h,s.offset&&s.offset++,r.push({value:i,time:o})}},{key:"setPoint",value:function(t,e){var i=e.value,n=e.time,o=this.getPoints("all").points;o[t]&&(o[t].value=i||o[t].value,o[t].time=n||o[t].time)}},{key:"init",value:function(){this.listeners(),this.render()}},{key:"resize",value:function(){}},{key:"render",value:function(){this.drawBackground(),this.drawGrid(),this.drawLine(),this.drawValues(),this.drawTime(),this.drawCurrentValue(),this.drawTarget(),this.drawIndicator(),requestAnimationFrame(this.render.bind(this))}},{key:"getPoints",value:function(t){var e=this.settings.data,i=this.data,n=s(this.data);if(e.offset){var o=n.length-e.offset,l=o>e.limit.value;l||(e.offset=n.length-e.limit.value),n=n.slice(0,l?o:e.limit.value)}n.length>e.limit.value&&(n=n.slice(n.length-e.limit.value,n.length));for(var r=n.length?n[0].value:0,a=n.length?n[0].value:0,c=e.length?e[0].value:0,f=e.length?e[0].value:0,h=0;h<=i.length-1;h++){var u=i[h].value;u>c&&(c=u),u<f&&(f=u)}for(var d=0;d<=n.length-1;d++){var g=n[d].value;g>r&&(r=g),g<a&&(a=g)}var v={all:{points:i,max:c,min:f},draw:{points:n=this.calcPointsCoords(n,a,r),max:r,min:a},last:i[i.length-1],first:i[0]};return t&&v[t]?v[t]:v}},{key:"calcPointsCoords",value:function(t,e,i){for(var n=this.getLineDrawCoords(),o=n.lineStart,l=(n.lineEnd,n.lineView),r=n.lineTop,a=(n.lineBottom,n.lineHeight),s=o,c=t.length-1,f=c;f>=0;f--){var h=t[f],u=h.value,d=l/c;h.x=s,h.y=r+a-a*(100*(u-e)/(i-e)/100),h.y||(h.y=a/2+r),s-=d}return t}},{key:"getIndicatorCoords",value:function(){var t,e=this.canvas,i=this.settings,n=i.indicator,o=i.line.offset,l=e.element,r=(n.styles,n.animation,this.getPoints()),a=r.draw,s=r.last,c=this.getLineDrawCoords(),f=(c.lineStart,c.lineEnd,c.lineTop),h=c.lineBottom,u=c.lineHeight,d=l.clientWidth-(o.right||0),g=!1,v=!1;return s&&((t=f+u-u*(100*(s.value-a.min)/(a.max-a.min)/100))||(t=u/2+f),t>h&&(t=h,v=!0),t<f&&(t=f,g=!0)),{x:d,y:t,overflowUp:g,overflowDown:v}}},{key:"drawIndicator",value:function(){var t=this.getIndicatorCoords(),e=t.x,i=t.y,n=this.settings,o=this.canvas,l=n.indicator,r=n.data,a=l.styles,s=l.animation,c=l.enable,f=o.context;!c||r.offset>0||(f.strokeStyle="transparent",f.save(),(!this.indicatorAnimatedState||this.indicatorAnimatedState>=1)&&(this.indicatorAnimatedState=0),f.globalAlpha=1-this.indicatorAnimatedState,f.beginPath(),f.arc(e,i,a.width*this.indicatorAnimatedState*s.scaleTo,0,2*Math.PI),f.fillStyle=a.color,f.fill(),f.stroke(),this.indicatorAnimatedState+=1/60/(s.time/1e3),f.restore(),f.beginPath(),f.arc(e,i,a.width,0,2*Math.PI),f.fillStyle=a.color,f.fill(),f.stroke())}},{key:"drawCurrentValue",value:function(){var t=this.settings,e=this.canvas,i=t.currentValue,n=t.offset,o=i.styles,l=i.enable,r=i.digits,a=i.position,s=e.context,c=e.element;if(l){var f=this.getPoints("last"),h=this.getIndicatorCoords(),u=h.y,d=h.overflowDown,g=h.overflowUp,v=u-o.panel.height/2,p="right"!==a?0:c.clientWidth-n.right,y="right"!==a?n.left:n.right,m=o.panel.height,b="right"!==a?n.left/2:c.clientWidth-n.right/2,x=u,w=u,k=n.left,P=c.clientWidth-n.right,S=o.line.color;if(!g&&!d){if(o.line.gradient&&o.line.gradient.enable){var T=o.line.gradient.points||[];S=s.createLinearGradient(k,0,P,0),1===T.length&&T.push(T[0]),T.forEach((function(t,e){var i=t.stop,n=t.color;i||0===i||(i=1/(T.length-1)*e),S.addColorStop(i,n)}))}s.save(),s.lineWidth=o.line.width,s.strokeStyle=s.fillStyle=S,s.beginPath(),o.line.dash&&s.setLineDash(o.line.dash),s.lineTo(k,w),s.lineTo(P,w),s.stroke(),s.restore()}s.strokeStyle=s.fillStyle=o.panel.background,s.beginPath(),s.rect(p,v,y,m),s.fill(),s.stroke(),s.font="100 12px arial",s.fillStyle=o.panel.color,s.textAlign="center",s.textBaseline="middle",s.fillText((f.value||0).toFixed(r),b,x)}}},{key:"drawBackground",value:function(){var t=this.canvas,e=this.settings.view,i=t.context,n=t.element,o=e.styles.background,l=window.devicePixelRatio||1;n.width=n.clientWidth*l,n.height=n.clientHeight*l,i.scale(l,l),i.fillStyle=o,i.fillRect(0,0,n.width,n.height)}},{key:"getLineDrawCoords",value:function(){var t=this.canvas,e=this.settings,i=e.line,n=(e.grid,e.data,i.offset),o=t.element,l=o.clientWidth-n.right,r=n.left,a=l-r,s=n.top+i.styles.width,c=o.clientHeight-n.bottom-i.styles.width;return{lineStart:l,lineEnd:r,lineView:a,lineTop:s,lineBottom:c,lineHeight:c-s}}},{key:"findPointByX",value:function(t){for(var e=s(this.getPoints("draw").points),i=!1,n=0;n<=e.length-1;n++){var o=e[n],l=e[n+1],r=Math.round(o.x),a=l?Math.round(l.x):0;(a||0===a)&&t>=r&&t<=a&&(i=(a+r)/2<=t?l:o)}return i}},{key:"drawTime",value:function(){var t=this.getLineDrawCoords(),e=t.lineStart,i=t.lineEnd,o=(t.lineView,t.lineTop,t.lineBottom,t.lineHeight,this.canvas),l=this.settings,r=l.timeLine,a=l.timeStamp,s=l.offset,c=l.timeFormat,f=r.enable,h=r.count,u=r.styles,d=o.element,g=o.context;if(f){var v=i,p=(e-v)/h;p+=p/(h-1);for(var y=0;y<h;y++){var m=v+p*y,b=this.findPointByX(m);g.font="100 12px arial",g.fillStyle=u.color,g.textAlign="center",g.textBaseline="middle",g.fillText(n(b&&b.time?b.time:a,c.line),m||0,d.clientHeight-s.bottom/2)}}}},{key:"drawValues",value:function(){var t=this.getPoints("draw"),e=t.max,i=t.min,n=this.getLineDrawCoords(),o=(n.lineStart,n.lineEnd,n.lineView,n.lineTop),l=n.lineBottom,r=n.lineHeight,a=this.canvas,s=this.settings,c=s.valuesLine,f=s.line,h=s.offset,u=s.view,d=c.count,g=c.enable,v=c.digits,p=c.styles,y=c.overflowValues,m=c.position,b=a.element,x=a.context,w=[];if(g){var k=r/(d-1),P=o+k,S=(b.clientHeight+f.offset.top-f.offset.bottom)/2;if(i===e){w.push({text:e,y:S});for(var T=(S-f.offset.top)/k,L=(S-f.offset.top)/k,O=1;O<=T;O++)w.push({text:e+e*O,y:S-k*O});for(var D=1;D<=L;D++)w.push({text:e-e*D,y:S+k*D})}else{w.push({text:e,y:o});for(var W=(e-i)/(d-1),E=1;E<=d-2;E++)w.push({text:e-W*E,y:P}),P+=k;w.push({text:i,y:l})}if(y&&(f.offset.top>h.top||f.offset.bottom<h.bottom)){var M=(e-i)/(d-1),j=Math.max.apply(null,w.map((function(t){return t.text}))),C=Math.min.apply(null,w.map((function(t){return t.y}))),H=Math.min.apply(null,w.map((function(t){return t.text}))),B=Math.max.apply(null,w.map((function(t){return t.y}))),X=Math.round((f.offset.top-h.top)/k),A=Math.round((f.offset.bottom-h.bottom)/k);e===i&&(M=e);for(var Y=1;Y<=X;Y++)w.push({text:j+M*Y,y:C-k*Y});for(var F=1;F<=A;F++)w.push({text:H-M*F,y:B+k*F})}for(var R=0;R<=w.length-1;R++){var z=w[R];x.font="100 12px arial",x.fillStyle=p.color,x.textAlign="center",x.textBaseline="middle",x.fillText(z.text.toFixed(v),"left"===m?h.left/2:b.clientWidth-h.right/2,z.y)}y&&(x.fillStyle=u.styles.background,x.strokeStyle="transparent",x.beginPath(),x.rect(0,0,b.clientWidth,h.top-5),x.fill(),x.stroke(),x.fillStyle=u.styles.background,x.strokeStyle="transparent",x.beginPath(),x.rect(0,b.clientHeight-h.bottom+5,b.clientWidth,b.clientHeight),x.fill(),x.stroke())}}},{key:"drawLine",value:function(){var t=this.canvas,e=this.settings,i=e.line,n=e.grid,o=e.offset,l=e.view,r=i.styles,a=r.backgroundGradient,s=r.lineGradient,c=r.color,f=r.width,h=t.context,u=t.element,d=this.getLineDrawCoords(),g=d.lineStart,v=d.lineEnd,p=d.lineTop,y=d.lineBottom,m=this.getPoints("draw"),b=m.points;if(m.min,m.max,h.beginPath(),h.lineWidth=f,h.strokeStyle=c,h.lineJoin="round",s.enable){var x=h.createLinearGradient(v,0,g,0),w=s.points||[];1===w.length&&w.push(w[0]),w.forEach((function(t,e){var i=t.stop,n=t.color;i||0===i||(i=1/(w.length-1)*e),x.addColorStop(i,n)})),h.strokeStyle=x}for(var k=b.length-1;k>=0;k--){var P=b[k];h.lineTo(P.x,P.y)}if(h.stroke(),a.enable&&b.length>1){h.beginPath(),h.lineWidth=0,h.strokeStyle="transparent";var S=h.createLinearGradient(0,p,0,y),T=a.points||[];1===T.length&&T.push(b[0]),T.forEach((function(t,e){var i=t.stop,n=t.color;i||0===i||(i=1/(T.length-1)*e),S.addColorStop(i,n)})),h.fillStyle=S,h.lineTo(g,y+f);for(var L=b.length-1;L>=0;L--){var O=b[L];h.lineTo(O.x,O.y)}h.lineTo(v,y+f),h.fill(),h.stroke()}n.enable&&(h.save(),h.beginPath(),h.lineJoin="miter",h.lineWidth=f,h.strokeStyle=l.styles.background,h.lineTo(0+o.left-f/2,0+o.top-f/2),h.lineTo(0+o.left-f/2,u.clientHeight-o.bottom+f/2),h.lineTo(u.clientWidth-o.right+f/2,u.clientHeight-o.bottom+f/2),h.lineTo(u.clientWidth-o.right+f/2,0+o.top-f/2),h.closePath(),h.stroke(),h.beginPath(),h.lineJoin="miter",h.lineWidth=n.styles.width,h.strokeStyle=n.styles.color,n.styles.dash&&h.setLineDash(n.styles.dash),h.lineTo(0+o.left,0+o.top),h.lineTo(0+o.left,u.clientHeight-o.bottom),h.lineTo(u.clientWidth-o.right,u.clientHeight-o.bottom),h.lineTo(u.clientWidth-o.right,0+o.top),h.closePath(),h.stroke(),h.restore())}},{key:"drawTarget",value:function(){var t=this.canvas,e=this.settings,i=this.actions,o=e.targetValue,l=e.offset,r=e.valuesLine,a=e.timeStamp,s=e.timeFormat,c=o.enable,f=o.coords,h=o.target,u=o.horizontalLine,d=o.verticalLine,g=o.valueLabel,v=f.x,p=f.y,y=t.element,m=t.context;if(c&&v&&p){var b=this.findPointByX(v),x=0;if(b){i.mouseOverPoint&&i.mouseOverPoint(b),h&&h.enable&&h.styles.points.forEach((function(t){m.beginPath(),m.strokeStyle=t.strokeColor,m.lineWidth=t.strokeWidth,m.fillStyle=t.background,m.arc(b.x,b.y,t.width,0,2*Math.PI),m.fill(),m.stroke(),t.width&&t.width>x&&(x=t.width)})),u&&u.enable&&(m.save(),m.lineWidth=u.styles.line.width,m.strokeStyle=u.styles.line.color,b.x-x>l.left&&!u.leftLineHidden&&(m.beginPath(),m.moveTo(0+l.left,b.y),m.lineTo(b.x-x,b.y),m.stroke()),b.x+x<y.clientWidth-l.right&&!u.rightLineHidden&&(m.beginPath(),m.moveTo(b.x+x,b.y),m.lineTo(y.clientWidth-l.right,b.y),m.stroke()),m.restore()),d&&d.enable&&(m.save(),m.lineWidth=d.styles.line.width,m.strokeStyle=d.styles.line.color,b.y-x>l.top&&!d.topLineHidden&&(m.beginPath(),m.moveTo(b.x,0+l.top),m.lineTo(b.x,b.y-x),m.stroke()),b.y+x<y.clientHeight-l.bottom&&!d.bottomLineHidden&&(m.beginPath(),m.moveTo(b.x,b.y+x),m.lineTo(b.x,y.clientHeight-l.bottom),m.stroke(),m.restore()));var w={};if(u&&u.enable&&(w.right={background:u.styles.panel.background,color:u.styles.panel.color,width:"left"===r.position?l.left:l.right,height:20,x:"left"===r.position?0:y.clientWidth-l.right,y:b.y-10,text:b.value.toFixed(r.digits||2)}),d&&d.enable){var k=n(b&&b.time?b.time:a,s.current),P=m.measureText(k).width+20,S=b.x-P/2;S<0&&(S=0),S+P>y.clientWidth&&(S=y.clientWidth-P),w.bottom={background:d.styles.panel.background,color:d.styles.panel.color,width:P,height:l.bottom,x:S,y:y.clientHeight-l.bottom,text:k}}if(Object.values(w).forEach((function(t){m.strokeStyle=m.fillStyle=t.background,m.beginPath(),m.rect(t.x,t.y,t.width,t.height),m.fill(),m.stroke(),m.font="100 12px arial",m.fillStyle=t.color,m.textAlign=t.textAlign,m.textBaseline="middle",m.fillText(t.text,t.x+t.width/2,t.y+t.height/2)})),g&&g.enable){var T=b.value.toFixed(r.digits||2),L=m.measureText(T).width+10,O=b.x+.5,D=b.x-L/2,W=!1,E=b.y-25-x-10;E<0&&(W=!0,E=b.y+x+10),m.strokeStyle=m.fillStyle=g.styles.background,m.beginPath(),W?(m.moveTo(O,E-5),m.lineTo(O-5,E),m.lineTo(O+5,E)):(m.moveTo(O,E+25+5),m.lineTo(O-5,E+25),m.lineTo(O+5,E+25)),m.fill(),m.stroke(),m.beginPath(),m.roundRect(D,E,L,25,g.styles.borderRadius),m.fill(),m.stroke(),m.font="100 12px arial",m.fillStyle=g.styles.color,m.textAlign="center",m.textBaseline="middle",m.fillText(T,D+L/2,E+12.5)}}}}},{key:"drawGrid",value:function(){var t=this.canvas,e=this.settings,i=e.grid,n=e.offset,o=t.element,l=t.context,r=i.enable,a=i.horizontal,s=i.vertical,c=i.styles;if(r){var h=0+n.left,u=o.clientWidth-n.right-n.left,d=0+n.top,g=o.clientHeight-n.bottom-n.top;if(l.save(),l.lineWidth=c.width,l.strokeStyle=c.color,l.fillStyle=c.background,l.rect(h,d,u,g),l.fill(),l.restore(),a&&a.enable){l.save();var v=[],p=(o.clientHeight-n.top-n.bottom)/(a.step+1),y=(o.clientHeight-n.top-n.bottom)/a.step,m=n.top,b=f({},c,{},a.styles||{});if("px"===(a.type||i.type))for(var x=1;x<y;x++){var w=m+x*a.step;v.push(w)}else for(var k=1;k<a.step+1;k++){var P=m+k*p;v.push(P)}l.lineWidth=b.width,l.strokeStyle=b.color,b.dash&&l.setLineDash(b.dash);for(var S=0;S<=v.length-1;S++)l.beginPath(),l.lineTo(0+n.left,v[S]),l.lineTo(o.clientWidth-n.right,v[S]),l.stroke();l.restore()}if(s&&s.enable){l.save();var T=[],L=(o.clientWidth-n.right-n.left)/(s.step+1),O=(o.clientWidth-n.right-n.left)/s.step,D=n.left,W=f({},c,{},s.styles||{});if("px"===(s.type||i.type))for(var E=1;E<O;E++){var M=D+E*s.step;T.push(M)}else for(var j=1;j<s.step+1;j++){var C=D+j*L;T.push(C)}l.lineWidth=W.width,l.strokeStyle=W.color,W.dash&&l.setLineDash(W.dash);for(var H=0;H<=T.length-1;H++)l.beginPath(),l.lineTo(T[H],0+n.top),l.lineTo(T[H],o.clientHeight-n.bottom),l.stroke();l.restore()}}}},{key:"setPointsLimit",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.settings,n=i.data,o=this.getPoints("all"),l=o.points;t||(t=n.limit.value),n.limit.value=n.limit.min&&t<n.limit.min?n.limit.min:n.limit.max&&t>n.limit.max?n.limit.max:e&&l.length<t?l.length:t<=2?2:t}},{key:"goToEnd",value:function(){this.settings.data.offset=0}},{key:"listeners",value:function(){var t=this,e=this.canvas,i=this.settings,n=this.actions,o=i.targetValue,l=e.element,r=!1,a=0,s=0,c=function(){o.coords={x:!1,y:!1}},f=function(e){r=!1,a=0,s=0,delete t.prevPinchDistance},h="ontouchstart"in document.documentElement;document.addEventListener("gesturestart",(function(t){t.preventDefault()})),window.addEventListener("resize",(function(e){var i=t.settings,n=i.line,o=i.offset,r=i.valuesLine,a=l.getBoundingClientRect(),s=(a.height+o.top-o.bottom)/2-(r.resize.topMin||0),c=(a.height+o.bottom-o.top)/2-(r.resize.bottomMin||0);n.offset.top>s&&(n.offset.top=s),n.offset.top<o.top&&(n.offset.top=o.top),n.offset.bottom>c&&(n.offset.bottom=c),n.offset.bottom<o.bottom&&(n.offset.bottom=o.bottom),t.resize()})),h?(l.addEventListener("touchend",(function(){f(),c()})),l.addEventListener("touchstart",(function(t){var e=t.touches,i=l.getBoundingClientRect(),n=e[0];1===e.length&&(o.coords={x:n.clientX-i.left,y:n.clientY-i.top}),a=n.clientX,s=n.clientY,r={x:a,y:s}})),l.addEventListener("touchmove",(function(e){var i=t.settings,n=(i.valuesLine,i.timeLine,i.data),f=i.line,h=i.offset,u=t.getPoints("all").points,d=l.getBoundingClientRect(),g=e.touches,v=g[0];if(c(),1===g.length&&(v.clientX>=d.left+h.left+1&&v.clientX<=d.left+d.width-h.right&&v.clientY>=d.top+h.top&&v.clientY<=d.bottom-h.bottom&&(o.coords={x:v.clientX-d.left,y:v.clientY-d.top}),v.clientX>=d.left+f.offset.left&&v.clientX<=d.left+d.width-f.offset.right&&v.clientY>=d.top+h.top&&v.clientY<=d.bottom-h.bottom&&r)){var p=n.offset+v.clientX-a;p<0&&(p=0),p>u.length-n.limit.value&&(p=u.length-n.limit.value),n.offset=p}if(2===g.length){var y=g[0],m=g[1],b=Math.hypot(y.clientX-m.clientX,y.clientY-m.clientY);if(!t.prevPinchDistance)return void(t.prevPinchDistance=b);var x=t.prevPinchDistance-b;t.prevPinchDistance=b;var w=n.limit.value+x;t.setPointsLimit(w)}r&&(a=v.clientX,s=v.clientY)}))):(l.addEventListener("mouseup",(function(){f()})),l.addEventListener("mouseleave",(function(){f(),c()})),l.addEventListener("mousedown",(function(t){a=t.clientX,s=t.clientY,r={x:a,y:s}})),l.addEventListener("dblclick",(function(e){var i=t.settings.offset,n=l.getBoundingClientRect();e.clientX>=n.left+i.left+1&&e.clientX<=n.left+n.width-i.right&&e.clientY>=n.top+i.top&&e.clientY<=n.bottom-i.bottom&&t.goToEnd()})),l.addEventListener("mousewheel",(function(e){var n=e.deltaY,o=i.data,l=i.timeLine.mousewheel,r=o.limit.value+n;if(!l.enable)return!1;l&&l.speed&&(r=o.limit.value+(n>0?l.speed:-1*l.speed)),t.setPointsLimit(r)})),l.addEventListener("mousemove",(function(e){var i=t.settings,f=i.valuesLine,h=i.timeLine,u=i.data,d=i.line,g=i.offset,v=t.getPoints("all").points,p=l.getBoundingClientRect();if(c(),l.style.cursor="default",e.clientX>=p.left+g.left+1&&e.clientX<=p.left+p.width-g.right&&e.clientY>=p.top+g.top&&e.clientY<=p.bottom-g.bottom&&(o.enable&&(l.style.cursor="crosshair"),o.coords={x:e.clientX-p.left,y:e.clientY-p.top}),e.clientX>=p.left+d.offset.left&&e.clientX<=p.left+p.width-d.offset.right&&e.clientY>=p.top+g.top&&e.clientY<=p.bottom-g.bottom){if(r){var y=u.offset+e.clientX-a;y<0&&(y=0),y>v.length-u.limit.value&&(y=v.length-u.limit.value),u.offset=y}n.mouseEnterLine&&!t.enterLineBool&&(t.leaveLineBool=!1,t.enterLineBool=!0,n.mouseEnterLine())}else n.mouseLeaveLine&&!t.leaveLineBool&&(t.enterLineBool=!1,t.leaveLineBool=!0,n.mouseLeaveLine());if(f.enable&&f.resize.enable&&("left"===f.position?e.clientX<p.left+g.left:e.clientX>=p.left+p.width-g.right)){if(l.style.cursor="row-resize",r){var m=s-e.clientY,b=e.clientY-s,x=e.clientY>s,w=e.clientY<s;if(x){var k=(p.height+g.top-g.bottom)/2-(f.resize.topMin||0),P=(p.height+g.bottom-g.top)/2-(f.resize.bottomMin||0);d.offset.top=d.offset.top-m<k?d.offset.top-m:k,d.offset.bottom=d.offset.bottom+b<P?d.offset.bottom+b:P}w&&(d.offset.top=d.offset.top-m>g.top?d.offset.top-m:g.top,d.offset.bottom=d.offset.bottom+b>g.bottom?d.offset.bottom+b:g.bottom)}d.offset.top<g.top&&(d.offset.top=g.top),d.offset.bottom<g.bottom&&(d.offset.bottom=g.bottom)}if(h.enable&&h.resize&&e.clientX>=p.left+d.offset.left&&e.clientX<=p.left+p.width-d.offset.right&&e.clientY>=p.bottom-g.bottom&&(l.style.cursor="col-resize",r)){var S=u.limit.value+e.clientX-a;t.setPointsLimit(S)}r&&(a=e.clientX,s=e.clientY)})))}}])&&u(e.prototype,i),l&&u(e,l),t}();function g(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(i,!0).forEach((function(e){y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var b=function(){function t(e){var i=e.canvas,n=void 0!==i&&i,o=e.data,l=void 0===o?[]:o,r=e.settings,a=void 0===r?{}:r,s=e.offset,c=void 0===s?{top:30,right:30,bottom:30,left:30}:s,f=e.actions,h=void 0===f?{}:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actions=h,this.canvas={element:n,context:n.getContext("2d"),isCanvas:(n instanceof Element||n instanceof HTMLDocument)&&"canvas"===n.tagName.toLowerCase()},this.data=l,this.cursor={x:0,y:0},this.settings={offset:p({},c),view:{styles:{background:"#1a1e30"}},line:{styles:{volumed:!0,width:40,color:"#fff",background:"transparent"}},texts:{center:{enable:!0,text:"100%",styles:{color:"#fff"}},partPercent:{enable:!0,styles:{color:"#fff"}}},hoverPanel:{enable:!0,styles:{color:"#fff",background:"#954ce9",borderRadius:2}},timeStamp:+new Date},this.setSettings(a),this.init()}var e,i,n;return e=t,(i=[{key:"prepareData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.reduce((function(t,e){return t+(parseFloat(e.value)||0)}),0);return t.forEach((function(t){t.percent=100/e*t.value,t.color=t.color||l()})),t}},{key:"setSettings",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.offset&&(t.line={},t.line.offset=t.offset),o(this.settings,t)}},{key:"getSettings",value:function(){return this.settings}},{key:"setData",value:function(t){this.data=t}},{key:"getData",value:function(){return this.data}},{key:"init",value:function(){this.listeners(),this.render()}},{key:"render",value:function(){this.drawBackground(),this.drawDonut(),this.drawHoverPanel(),requestAnimationFrame(this.render.bind(this))}},{key:"drawBackground",value:function(){var t=this.canvas,e=this.settings.view,i=t.context,n=t.element,o=e.styles.background,l=window.devicePixelRatio||1;n.width=n.clientWidth*l,n.height=n.clientHeight*l,i.scale(l,l),i.fillStyle=o,i.fillRect(0,0,n.width,n.height)}},{key:"generatePolygon",value:function(t){var e=t.count,i=void 0===e?20:e,n=t.x,o=t.y,l=t.radius,a=t.lineWidth,s=t.startPi,c=t.endPi,f=[],h=(c-s)/i;h=isFinite(h)?h:0;for(var u=0;u<=i;u++)f.push(r(n,o,l+a/2,s+h*u));for(var d=0;d<=i;d++)f.push(r(n,o,l-a/2,c-h*d));return f}},{key:"isPathHover",value:function(t){for(var e=t.x,i=t.y,n=t.polygon,o=!1,l=0,r=n.length-1;l<n.length;r=l++){var a=n[l].x,s=n[l].y,c=n[r].x,f=n[r].y;s>i!=f>i&&e<(c-a)*(i-s)/(f-s)+a&&(o=!o)}return o}},{key:"drawDonut",value:function(){var t=this.canvas,e=this.settings,i=this.data,n=this.cursor,o=e.offset,l=e.line,s=e.texts,c=t.context,f=t.element,h=Math.min(f.clientHeight-o.top-o.bottom-l.styles.width,f.clientWidth-o.left-o.right-l.styles.width)/2,u=h>0?h:1,d=f.clientWidth/2+o.left-o.right,g=f.clientHeight/2+o.top-o.bottom,v=l.styles.width,p=l.styles.volumed;i=this.prepareData(i);var y=-Math.PI/2;s.center.enable&&(c.font="800 20px arial",c.textAlign="center",c.textBaseline="middle",c.fillStyle=s.center.styles.color,c.fillText(s.center.text,d,g));for(var m=0;m<=i.length-1;m++){var b=y,x=2*Math.PI*i[m].percent/100+y;y=x;var w=this.generatePolygon({x:d,y:g,radius:u,lineWidth:v,startPi:b,endPi:x}),k=this.isPathHover({x:n.x,y:n.y,polygon:w});if(i[m].polygon=w,i[m].hovered=k,c.save(),c.beginPath(),c.strokeStyle=k?a(i[m].color,20):i[m].color,c.lineWidth=v,c.fillStyle=l.styles.background,c.arc(d,g,u,b,x),c.fill(),c.stroke(),c.restore(),p){c.save(),c.beginPath(),c.strokeStyle=a(i[m].color,k?-30:-50),c.lineWidth=v/2,c.fillStyle=l.styles.background;var P=u-v/4;P<0&&(P=0),c.arc(d,g,P,b,x),c.fill(),c.stroke(),c.restore()}if(s.partPercent.enable){c.font="100 10px arial",c.textAlign="center",c.textBaseline="middle",c.fillStyle=s.partPercent.styles.color;var S=parseFloat(i[m].percent.toFixed(2))+"%",T=r(d,g,u+v+5,(b+x)/2);c.fillText(S,T.x,T.y)}}}},{key:"drawHoverPanel",value:function(){var t=this.canvas,e=this.settings,i=this.data,n=void 0===i?[]:i,o=this.cursor,l=t.element,r=t.context,a=e.hoverPanel,s=n.filter((function(t){return t.hovered}));if((s=!!s.length&&s[0])&&a&&a.enable){var c=[s.label,s.value,parseFloat(s.percent.toFixed(2))+"%"];r.font="100 12px arial";var f=Math.max.apply(Math,g(c.map((function(t){return r.measureText(t).width}))))+14,h=18*c.length,u=o.x,d=o.x-f/2,v=!1,p=o.y-h-10;p<0&&(v=!0,p=o.y+10),d<0&&(d=0),d+f>l.clientWidth&&(d=l.clientWidth-f),r.strokeStyle=r.fillStyle=a.styles.background,r.beginPath(),v?(r.moveTo(u,p-5),r.lineTo(u-5,p),r.lineTo(u+5,p)):(r.moveTo(u,p+h+5),r.lineTo(u-5,p+h),r.lineTo(u+5,p+h)),r.fill(),r.stroke(),r.beginPath(),r.roundRect(d,p,f,h,a.styles.borderRadius),r.fill(),r.stroke(),r.font="100 12px arial",r.textAlign="left",r.textBaseline="middle",r.fillStyle=a.styles.color,c.forEach((function(t,e){r.fillText(t,d+7,p+14*(e+1))}))}}},{key:"listeners",value:function(){var t=this,e=this.canvas,i=(this.data,e.context,e.element);i.addEventListener("mousemove",(function(e){t.settings;var n=i.getBoundingClientRect(),o=e.clientX-n.left,l=e.clientY-n.top;t.cursor={x:o,y:l}})),i.addEventListener("mouseout",(function(e){t.cursor={x:0,y:0}}))}}])&&m(e.prototype,i),n&&m(e,n),t}();i.d(e,"Line",(function(){return d})),i.d(e,"Donut",(function(){return b}))}]);